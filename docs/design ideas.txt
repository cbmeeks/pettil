EDITOR

edit - invoke the editor on the most recent screen

Editor commands begin with STOP, which flashes the screen
STOP SPACE - cancel editor command
STOP STOP - save current screen, exit the editor
STOP UP - previous screen
STOP DOWN - next screen
STOP HOME - first screen
STOP S - save all screens to file
STOP L - load a file of screens
STOP DEL - delete the current screen.  Replace with next then prev then blank
STOP INS - insert a blank screen before the current screen


Screens are compressed/decompressed on the fly with some combination
of RLE/LZ/Rad50



Events / Multitasking

Have some sort of event queue, where high level words are triggered
by the jiffy clock IRQ.  See Garth's design

The IRQ counts down a timer, with events triggered at their expiration

oneshot   ( jiffies cfa -- ; add a one-time event to the queue )
repeat   ( jiffies cfa -- ; add a repeating event to the queue )

use the event queue to flash the screen in the editor for 5 jiffies



setirq pla
 sta n
 pla
 sta n+1
 sei           ; disable interrupts
 brk
 .byt inr | N0 ; bump the RTS address
 .byt ldd | N0 ; retrieve the word
 .byt set | N0 ; IRQ vector
 .word $0090
 .byt std | N0 ; set the new IRQ vector
 .byt rtn      ; done
 cli           ; enable interrupts
 rts
 
 jsr setirq
 .word *+2
irqhandler 